{"componentChunkName":"component---src-templates-blog-post-js","path":"/developper-avec-aframe/","result":{"data":{"site":{"siteMetadata":{"title":"GOLB | blog web et tech"}},"markdownRemark":{"id":"1f23931c-cfc5-5a75-91d7-872e65ab1bbd","excerpt":"En fin février, j’ai suivi un cours de deux semaines sur le développement en réalité virtuelle (j’adore mes études). Alors évidemment en 2 semaines on ne…","html":"<p>En fin février, j’ai suivi un cours de deux semaines sur le développement en réalité virtuelle (j’adore mes études). Alors évidemment en 2 semaines on ne devient ni game designer, ni expert en VR, ni pas grand-chose. Cependant, j’ai été bluffé par ce que l’on peut réaliser en si peu de temps grâce au framework <a href=\"https://aframe.io/\">A-Frame</a>. J’ai eu essayé de développer des jeux avec Unity, mais la motivation s’est envolée après les dix premières heures de tuto en voyant les 90 restantes. Il m’est également arrivé de développer des micro-jeux en utilisant JavaScript et les <a href=\"https://developer.mozilla.org/fr/docs/Web/HTML/Element/canvas\">canvas</a> html, mais le résultat était… peu impressionnant. Alors quand on m’a dit que j’avais moins de 2 semaines pour apprendre un framework et développer une expérience VR, j’avais peu d’espoir de faire quelque chose de grandiose et de fonctionnel. Et finalement… ba j’ai pas codé GTA, mais je suis plutôt content du résultat.</p>\n<h2>Le framework A-Frame</h2>\n<p>Je ne vais pas vous faire un tuto A-Frame, mais j’aimerais essayer de vous faire comprendre en (très) gros son fonctionnement. Comment est-ce qu’on peut coder une expérience VR avec du bête HTML et du simple JavaScript?</p>\n<p>En fait, le framework est tellement simple d’utilisation qu’il vous suffit de créer un fichier HTML avec le code suivant, de double cliquer dessus, et pouf vous aurez créé votre première expérience VR. ( Allez-y, j’attends… )</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://aframe.io/releases/1.1.0/aframe.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-scene</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-sky</span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#ECECEC<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-sky</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-box</span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1 0.5 -3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rotation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 45 0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#4CC3D9<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-box</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-cylinder</span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1 0.75 -3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">radius</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#FFC65D<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-cylinder</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-plane</span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 -4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rotation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-90 0 0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#7BC8A4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-plane</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-scene</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Comme vous pouvez le voir, il suffit d’importer le framework dans votre HTML (bien sûr, on peut aussi le faire avec npm), de placez une <code class=\"language-text\">&lt;a-scene&gt;</code>, et de mettre dans cette scène tous les éléments que vous voulez dans votre expérience VR.</p>\n<h3>Les composants A-Frame</h3>\n<p>Le framework est basé sur un système de composants JavaScript. Mais attention, si vous avez l’habitude des frameworks du style React, Angular ou Vue, sachez que les composants A-Frame ne s’utilisent pas exactement de la même façon. Là où un composant React “Foo” s’utilisera avec une balise <code class=\"language-text\">&lt;Foo bar=&quot;value&quot; /&gt;</code>, un composant A-Frame “Foo” s’utilisera en tant qu’attribut sur une balise représentant une entité <code class=\"language-text\">&lt;a-entity foo=&quot;bar: value&quot;&gt;&lt;/a-entity&gt;</code>. Les balise <code class=\"language-text\">&lt;a-entity&gt;</code> servent à représenter n’importe quel élément de votre scène, que ce soit un mur, un ennemi, le joueur lui-même ou une lumière. Le concept est donc d’utiliser plein d’entités, au départ vides, et de leur attribuer différentes caractéristiques ou comportements en utilisant des composants.</p>\n<p>A-Frame fournit un certain nombre de composants de base, et vous pouvez bien sûr créer vos propres composants. Les composants de base sont, par exemple, <code class=\"language-text\">position</code>, <code class=\"language-text\">rotation</code>, <code class=\"language-text\">material</code> ou <code class=\"language-text\">geometry</code>. Ils servent principalement à placer l’entité dans l’espace, à lui donner une forme, une couleur ou encore une animation. Vous pourrez ensuite coder vos propres composants qui serviront plutôt à apporter des comportements à vos entités. Par exemple, le premier composant que j’ai créé a été un composant <code class=\"language-text\">follow</code>. Grâce à ce composant, je peux dire à n’importe quelle entité de se déplacer en direction d’une autre. Ça peut être utile pour faire un ennemi qui vous fonce dessus, un missile à tête chercheuse ou un animal de compagnie. Dans l’exemple qui suit, la boule rouge va avancer en direction de la bleue. (à condition d’avoir codé le composant “follow” bien entendu)</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span>\n    <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>redBall<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 0<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">geometry</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>primitive: sphere; radius: 2<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">material</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>color: red<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">follow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target: #blueBall<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span>\n    <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blueBall<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 99<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">geometry</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>primitive: sphere; radius: 2<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">material</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>color: blue<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Je ne vais pas vous montrer ici comment coder un composant, mais si ça vous intéresse, vous pouvez consulter la <a href=\"https://aframe.io/docs/1.2.0/core/component.html\">documentation officielle sur les composants</a>.</p>\n<h3>Gérer les contrôleurs et la compatibilité VR / PC</h3>\n<p>Faire en sorte que mon jeu soit compatible PC et VR est ce qui m’a donné le plus de fil à retordre. Il serait honnêtement plus simple de faire une version différente par plateforme, mais ce serait plus compliqué à distribuer. Mais avant tout, laissez-moi déjà vous montrer comment gérer les contrôleurs VR, et par la même occasion, comment gérer le joueur.</p>\n<p>Le joueur est en fait simplement composé d’une caméra, et de deux mains en VR. Pour la caméra, on va utiliser le composant A-Frame <code class=\"language-text\">camera</code>, et pour les mains, on va simplement utiliser le composant A-Frame <code class=\"language-text\">hand-controls</code>. Ensuite on va encapsuler ces deux éléments dans une entité avec le composant <code class=\"language-text\">movement-controls</code> qui va gérer les déplacements avec wasd ou un joystick. Trop simple non? </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>player<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">movement-controls</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>camera<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">camera</span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 1.7 0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gun<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">gltf-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#gun<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.5 -1 -1.2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hands<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span>\n      <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>left-hand<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-0.3 0 -0.3<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">rotation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 90<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">hand-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hand: left<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span>\n      <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>right-hand<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.5 1.0 -1.5<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">rotation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 -90<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">hand-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hand: right<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gun<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">gltf-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#gun<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span> 0 -0.3 0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>(Note: le composant gltf-model permet d’utiliser un asset 3d)</p>\n<p>Comme vous pouvez le constater, mon joueur dispose d’un “gun”. Et même de deux guns… En réalité, le premier, qui est dans la caméra, est le gun pour PC, et le deuxième, qui est dans la main droite, est le gun pour la VR. Il faudra donc détecter la plateforme sur laquelle nous sommes, et supprimer l’un des deux guns en fonction. Une tâche plutôt simple en apparence, mais qui en pratique amène vite des bugs si nos guns possèdent des composants (de tir par exemple).</p>\n<p>Ensuite, il ne reste plus qu’à gérer les inputs du joueur… “plus qu’à” …</p>\n<p>En réalité, A-Frame fournit un composant différent pour gérer chaque modèle de contrôleur (Oculus Quest, Oculus Go, HTC Vive, …). A-Frame fournit également le composant <code class=\"language-text\">hand-controls</code> qui est un composant “universel”. Mais chaque modèle de contrôleur possède des événements différents puisqu’ils ne possèdent pas les mêmes boutons. Et je vous avoue que je n’ai pas eu le temps de me pencher sur ça donc j’ai utilisé l’événement <code class=\"language-text\">mousedown</code> pour tout… et ça marche plus ou moins. J’ai eu certains échos comme quoi sur HTC Vive seul la gâchette gauche marcherait. Mais heu voilà, la deadline est passée et je n’ai plus de matériel VR pour tester donc mon projet restera un peu buggé 😅</p>\n<h3>Les événements</h3>\n<p>Le dernier gros point, que je ne vais que peu aborder, est la gestion des événements. Sans ça notre gameplay risque d’être assez limité. On peut très bien gérer les événements de manière classique avec des <code class=\"language-text\">.emit()</code> et des <code class=\"language-text\">.addEventListener()</code> et c’est d’ailleurs ce que j’ai souvent fait. Sinon on peut utiliser des moyens un peu rigolo comme avec la librairie <a href=\"https://github.com/supermedium/superframe/tree/master/components/event-set\">aframe-event-set-component</a>. Et mon prof a créé un petit composant <code class=\"language-text\">listen-to</code> qui couplé à <code class=\"language-text\">event-set</code> permet presque de gérer tous les événements sans écrire de JavaScript. En pratique ça donne un truc du genre:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>elevator<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 0<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">listen-to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target: #elevator-btn; event: click; emit: elevator-up<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">event-set</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>_event: elevator-up; position: 0 10 0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>elevator-btn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Dans cet exemple, l’ascenseur va se téléporter à 10m de hauteur lorsque vous allez cliquer sur le bouton. Alors en réalité vous mettriez plutôt une animation pour éviter qu’il ne se téléporte, mais c’est  pour vous montrer que les composants peuvent vraiment être “détournés” pour faire toute sorte de choses.</p>\n<h3>Les librairies</h3>\n<p>Si vous fouillez un peu, vous trouverez pas mal de composants bien utiles que de gentils développeurs auront créés et mis à disposition. Voici une petite liste de ceux que j’ai utilisés ou qui pourraient vous être utiles.</p>\n<ul>\n<li><a href=\"https://github.com/n5ro/aframe-extras\">A-Frame Extras</a>, des add-ons incontournables comme movement-controls ou nav-mesh</li>\n<li><a href=\"https://github.com/n5ro/aframe-physics-system\">aframe-physics-system</a>, un moteur physique de base</li>\n<li><a href=\"https://github.com/fernandojsg/aframe-teleport-controls\">aframe-teleport-controls</a>, un composant de téléportation comme dans plein de jeux en VR</li>\n<li><a href=\"https://github.com/supermedium/aframe-super-shooter-kit\">aframe-super-shooter-kit</a>, propose des mécanismes basiques de fps</li>\n<li><a href=\"https://github.com/supermedium/superframe/tree/master/components/look-at/\">aframe-look-at-component</a>, pour qu’un élément soit constamment orienté vers le joueur</li>\n<li><a href=\"https://github.com/donmccurdy/aframe-inspector-plugin-recast\">aframe-inspector-plugin-recast</a>, pour créer facilement une nav-mesh (mur invisible)</li>\n<li><a href=\"https://github.com/supermedium/superframe/tree/master/components/state\">aframe-state-component</a>, pour centraliser la gestion d’état (je ne l’ai pas utilisé mais ça a l’air cool)</li>\n</ul>\n<p>Sinon, sachez que A-Frame est basé sur <a href=\"https://threejs.org/\">three.js</a> et que vous pouvez utiliser directement les fonctions de three.js si la surcouche A-Frame ne vous suffit pas. Plus d’infos dans <a href=\"https://aframe.io/docs/1.2.0/introduction/developing-with-threejs.html\">la doc</a>.</p>\n<h2>Mon jeu</h2>\n<p>BON ET MON JEU ALORS?!?!? Je vous bassine avec depuis le début et je ne vous l’ai toujours pas montré. Et bien vous pouvez y jouer sur <a href=\"https://duckhuntrevenge.surge.sh\">https://duckhuntrevenge.surge.sh</a>. Comme je l’ai expliqué, les contrôles risquent d’être un peu spéciaux (pour ne pas dire buggés) suivant votre matériel VR. Ensuite, il est fortement conseillé d’utiliser Chrome ou Edge pour y jouer sur PC. Et pour finir, mon meilleur score est de 157 points, alors hésite pas à lâcher le tien dans les comms! (oui j’aurais pu faire un scoreboard. Mais bon heu… voilà, hein, okay?)</p>\n<p>Pour les curieux, vous pouvez retrouver le code de mon jeu sur <a href=\"https://github.com/robiiiiiiiiiiiin/duck-hunt-revenge\">ce repo</a>.</p>","frontmatter":{"title":"Développer un jeu en réalité virtuelle sur le web","date":"16 mars 2021","description":"Ça me paraissait presque impossible, et c'est pourtant si facile à l'aide du framework A-Frame.","tags":["Framework"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAABauPUNQUBz//EABoQAAMAAwEAAAAAAAAAAAAAAAECAwQRMjP/2gAIAQEAAQUCWgiy01OZLqOaKBDF8f/EABgRAQEAAwAAAAAAAAAAAAAAAAEAAgMh/9oACAEDAQE/ATlluRv/xAAYEQACAwAAAAAAAAAAAAAAAAAAARNBUf/aAAgBAgEBPwGiBaf/xAAcEAACAgIDAAAAAAAAAAAAAAAAAQIRAyEQIkH/2gAIAQEABj8CyPyUtUPvJuy3J8aQj//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/IUILakbmZxKzutIb3JSLz3cuFMrTf//aAAwDAQACAAMAAAAQqO//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QKh2ciF//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QUVsKaIv/xAAcEAEBAAIDAQEAAAAAAAAAAAABEQAhMUFRYXH/2gAIAQEAAT8Q6G9KE13ffmAGNmqlI3kaa+ZViohCPnOMoQoLq+5UqDUN43ORQ/NZ/9k=","aspectRatio":1.7857142857142858,"src":"/static/df7aeee6e88dc86dceb7d44ede3b648a/64b17/thumbnail.jpg","srcSet":"/static/df7aeee6e88dc86dceb7d44ede3b648a/e94f2/thumbnail.jpg 100w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/4fa6c/thumbnail.jpg 200w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/64b17/thumbnail.jpg 400w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/39f27/thumbnail.jpg 600w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/a1eb1/thumbnail.jpg 800w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/a6c62/thumbnail.jpg 1200w","sizes":"(max-width: 400px) 100vw, 400px"}}}}}},"pageContext":{"id":"1f23931c-cfc5-5a75-91d7-872e65ab1bbd"}},"staticQueryHashes":["3764592887"]}