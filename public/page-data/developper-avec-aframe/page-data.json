{"componentChunkName":"component---src-templates-blog-post-js","path":"/developper-avec-aframe/","result":{"data":{"site":{"siteMetadata":{"title":"GOLB | blog web et tech"}},"markdownRemark":{"id":"1f23931c-cfc5-5a75-91d7-872e65ab1bbd","excerpt":"En fin f√©vrier, j‚Äôai suivi un cours de deux semaines sur le d√©veloppement en r√©alit√© virtuelle (j‚Äôadore mes √©tudes). Alors √©videmment en 2 semaines on ne‚Ä¶","html":"<p>En fin f√©vrier, j‚Äôai suivi un cours de deux semaines sur le d√©veloppement en r√©alit√© virtuelle (j‚Äôadore mes √©tudes). Alors √©videmment en 2 semaines on ne devient ni game designer, ni expert en VR, ni pas grand-chose. Cependant, j‚Äôai √©t√© bluff√© par ce que l‚Äôon peut r√©aliser en si peu de temps gr√¢ce au framework <a href=\"https://aframe.io/\">A-Frame</a>. J‚Äôai eu essay√© de d√©velopper des jeux avec Unity, mais la motivation s‚Äôest envol√©e apr√®s les dix premi√®res heures de tuto en voyant les 90 restantes. Il m‚Äôest √©galement arriv√© de d√©velopper des micro-jeux en utilisant JavaScript et les <a href=\"https://developer.mozilla.org/fr/docs/Web/HTML/Element/canvas\">canvas</a> html, mais le r√©sultat √©tait‚Ä¶ peu impressionnant. Alors quand on m‚Äôa dit que j‚Äôavais moins de 2 semaines pour apprendre un framework et d√©velopper une exp√©rience VR, j‚Äôavais peu d‚Äôespoir de faire quelque chose de grandiose et de fonctionnel. Et finalement‚Ä¶ ba j‚Äôai pas cod√© GTA, mais je suis plut√¥t content du r√©sultat.</p>\n<h2>Le framework A-Frame</h2>\n<p>Je ne vais pas vous faire un tuto A-Frame, mais j‚Äôaimerais essayer de vous faire comprendre en (tr√®s) gros son fonctionnement. Comment est-ce qu‚Äôon peut coder une exp√©rience VR avec du b√™te HTML et du simple JavaScript?</p>\n<p>En fait, le framework est tellement simple d‚Äôutilisation qu‚Äôil vous suffit de cr√©er un fichier HTML avec le code suivant, de double cliquer dessus, et pouf vous aurez cr√©√© votre premi√®re exp√©rience VR. ( Allez-y, j‚Äôattends‚Ä¶ )</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://aframe.io/releases/1.1.0/aframe.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-scene</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-sky</span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#ECECEC<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-sky</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-box</span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1 0.5 -3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rotation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 45 0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#4CC3D9<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-box</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-cylinder</span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1 0.75 -3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">radius</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1.5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#FFC65D<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-cylinder</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-plane</span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 -4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rotation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-90 0 0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#7BC8A4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-plane</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-scene</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Comme vous pouvez le voir, il suffit d‚Äôimporter le framework dans votre HTML (bien s√ªr, on peut aussi le faire avec npm), de placez une <code class=\"language-text\">&lt;a-scene&gt;</code>, et de mettre dans cette sc√®ne tous les √©l√©ments que vous voulez dans votre exp√©rience VR.</p>\n<h3>Les composants A-Frame</h3>\n<p>Le framework est bas√© sur un syst√®me de composants JavaScript. Mais attention, si vous avez l‚Äôhabitude des frameworks du style React, Angular ou Vue, sachez que les composants A-Frame ne s‚Äôutilisent pas exactement de la m√™me fa√ßon. L√† o√π un composant React ‚ÄúFoo‚Äù s‚Äôutilisera avec une balise <code class=\"language-text\">&lt;Foo bar=&quot;value&quot; /&gt;</code>, un composant A-Frame ‚ÄúFoo‚Äù s‚Äôutilisera en tant qu‚Äôattribut sur une balise repr√©sentant une entit√© <code class=\"language-text\">&lt;a-entity foo=&quot;bar: value&quot;&gt;&lt;/a-entity&gt;</code>. Les balise <code class=\"language-text\">&lt;a-entity&gt;</code> servent √† repr√©senter n‚Äôimporte quel √©l√©ment de votre sc√®ne, que ce soit un mur, un ennemi, le joueur lui-m√™me ou une lumi√®re. Le concept est donc d‚Äôutiliser plein d‚Äôentit√©s, au d√©part vides, et de leur attribuer diff√©rentes caract√©ristiques ou comportements en utilisant des composants.</p>\n<p>A-Frame fournit un certain nombre de composants de base, et vous pouvez bien s√ªr cr√©er vos propres composants. Les composants de base sont, par exemple, <code class=\"language-text\">position</code>, <code class=\"language-text\">rotation</code>, <code class=\"language-text\">material</code> ou <code class=\"language-text\">geometry</code>. Ils servent principalement √† placer l‚Äôentit√© dans l‚Äôespace, √† lui donner une forme, une couleur ou encore une animation. Vous pourrez ensuite coder vos propres composants qui serviront plut√¥t √† apporter des comportements √† vos entit√©s. Par exemple, le premier composant que j‚Äôai cr√©√© a √©t√© un composant <code class=\"language-text\">follow</code>. Gr√¢ce √† ce composant, je peux dire √† n‚Äôimporte quelle entit√© de se d√©placer en direction d‚Äôune autre. √áa peut √™tre utile pour faire un ennemi qui vous fonce dessus, un missile √† t√™te chercheuse ou un animal de compagnie. Dans l‚Äôexemple qui suit, la boule rouge va avancer en direction de la bleue. (√† condition d‚Äôavoir cod√© le composant ‚Äúfollow‚Äù bien entendu)</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span>\n    <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>redBall<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 0<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">geometry</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>primitive: sphere; radius: 2<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">material</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>color: red<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">follow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target: #blueBall<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span>\n    <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blueBall<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 99<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">geometry</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>primitive: sphere; radius: 2<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">material</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>color: blue<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Je ne vais pas vous montrer ici comment coder un composant, mais si √ßa vous int√©resse, vous pouvez consulter la <a href=\"https://aframe.io/docs/1.2.0/core/component.html\">documentation officielle sur les composants</a>.</p>\n<h3>G√©rer les contr√¥leurs et la compatibilit√© VR / PC</h3>\n<p>Faire en sorte que mon jeu soit compatible PC et VR est ce qui m‚Äôa donn√© le plus de fil √† retordre. Il serait honn√™tement plus simple de faire une version diff√©rente par plateforme, mais ce serait plus compliqu√© √† distribuer. Mais avant tout, laissez-moi d√©j√† vous montrer comment g√©rer les contr√¥leurs VR, et par la m√™me occasion, comment g√©rer le joueur.</p>\n<p>Le joueur est en fait simplement compos√© d‚Äôune cam√©ra, et de deux mains en VR. Pour la cam√©ra, on va utiliser le composant A-Frame <code class=\"language-text\">camera</code>, et pour les mains, on va simplement utiliser le composant A-Frame <code class=\"language-text\">hand-controls</code>. Ensuite on va encapsuler ces deux √©l√©ments dans une entit√© avec le composant <code class=\"language-text\">movement-controls</code> qui va g√©rer les d√©placements avec wasd ou un joystick. Trop simple non? </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>player<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">movement-controls</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>camera<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">camera</span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 1.7 0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gun<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">gltf-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#gun<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.5 -1 -1.2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hands<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span>\n      <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>left-hand<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-0.3 0 -0.3<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">rotation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 90<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">hand-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hand: left<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span>\n      <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>right-hand<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0.5 1.0 -1.5<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">rotation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 -90<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">hand-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hand: right<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gun<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">gltf-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#gun<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span> 0 -0.3 0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>(Note: le composant gltf-model permet d‚Äôutiliser un asset 3d)</p>\n<p>Comme vous pouvez le constater, mon joueur dispose d‚Äôun ‚Äúgun‚Äù. Et m√™me de deux guns‚Ä¶ En r√©alit√©, le premier, qui est dans la cam√©ra, est le gun pour PC, et le deuxi√®me, qui est dans la main droite, est le gun pour la VR. Il faudra donc d√©tecter la plateforme sur laquelle nous sommes, et supprimer l‚Äôun des deux guns en fonction. Une t√¢che plut√¥t simple en apparence, mais qui en pratique am√®ne vite des bugs si nos guns poss√®dent des composants (de tir par exemple).</p>\n<p>Ensuite, il ne reste plus qu‚Äô√† g√©rer les inputs du joueur‚Ä¶ ‚Äúplus qu‚Äô√†‚Äù ‚Ä¶</p>\n<p>En r√©alit√©, A-Frame fournit un composant diff√©rent pour g√©rer chaque mod√®le de contr√¥leur (Oculus Quest, Oculus Go, HTC Vive, ‚Ä¶). A-Frame fournit √©galement le composant <code class=\"language-text\">hand-controls</code> qui est un composant ‚Äúuniversel‚Äù. Mais chaque mod√®le de contr√¥leur poss√®de des √©v√©nements diff√©rents puisqu‚Äôils ne poss√®dent pas les m√™mes boutons. Et je vous avoue que je n‚Äôai pas eu le temps de me pencher sur √ßa donc j‚Äôai utilis√© l‚Äô√©v√©nement <code class=\"language-text\">mousedown</code> pour tout‚Ä¶ et √ßa marche plus ou moins. J‚Äôai eu certains √©chos comme quoi sur HTC Vive seul la g√¢chette gauche marcherait. Mais heu voil√†, la deadline est pass√©e et je n‚Äôai plus de mat√©riel VR pour tester donc mon projet restera un peu bugg√© üòÖ</p>\n<h3>Les √©v√©nements</h3>\n<p>Le dernier gros point, que je ne vais que peu aborder, est la gestion des √©v√©nements. Sans √ßa notre gameplay risque d‚Äô√™tre assez limit√©. On peut tr√®s bien g√©rer les √©v√©nements de mani√®re classique avec des <code class=\"language-text\">.emit()</code> et des <code class=\"language-text\">.addEventListener()</code> et c‚Äôest d‚Äôailleurs ce que j‚Äôai souvent fait. Sinon on peut utiliser des moyens un peu rigolo comme avec la librairie <a href=\"https://github.com/supermedium/superframe/tree/master/components/event-set\">aframe-event-set-component</a>. Et mon prof a cr√©√© un petit composant <code class=\"language-text\">listen-to</code> qui coupl√© √† <code class=\"language-text\">event-set</code> permet presque de g√©rer tous les √©v√©nements sans √©crire de JavaScript. En pratique √ßa donne un truc du genre:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>elevator<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">position</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 0<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">listen-to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target: #elevator-btn; event: click; emit: elevator-up<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">event-set</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>_event: elevator-up; position: 0 10 0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a-entity</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>elevator-btn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a-entity</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Dans cet exemple, l‚Äôascenseur va se t√©l√©porter √† 10m de hauteur lorsque vous allez cliquer sur le bouton. Alors en r√©alit√© vous mettriez plut√¥t une animation pour √©viter qu‚Äôil ne se t√©l√©porte, mais c‚Äôest  pour vous montrer que les composants peuvent vraiment √™tre ‚Äúd√©tourn√©s‚Äù pour faire toute sorte de choses.</p>\n<h3>Les librairies</h3>\n<p>Si vous fouillez un peu, vous trouverez pas mal de composants bien utiles que de gentils d√©veloppeurs auront cr√©√©s et mis √† disposition. Voici une petite liste de ceux que j‚Äôai utilis√©s ou qui pourraient vous √™tre utiles.</p>\n<ul>\n<li><a href=\"https://github.com/n5ro/aframe-extras\">A-Frame Extras</a>, des add-ons incontournables comme movement-controls ou nav-mesh</li>\n<li><a href=\"https://github.com/n5ro/aframe-physics-system\">aframe-physics-system</a>, un moteur physique de base</li>\n<li><a href=\"https://github.com/fernandojsg/aframe-teleport-controls\">aframe-teleport-controls</a>, un composant de t√©l√©portation comme dans plein de jeux en VR</li>\n<li><a href=\"https://github.com/supermedium/aframe-super-shooter-kit\">aframe-super-shooter-kit</a>, propose des m√©canismes basiques de fps</li>\n<li><a href=\"https://github.com/supermedium/superframe/tree/master/components/look-at/\">aframe-look-at-component</a>, pour qu‚Äôun √©l√©ment soit constamment orient√© vers le joueur</li>\n<li><a href=\"https://github.com/donmccurdy/aframe-inspector-plugin-recast\">aframe-inspector-plugin-recast</a>, pour cr√©er facilement une nav-mesh (mur invisible)</li>\n<li><a href=\"https://github.com/supermedium/superframe/tree/master/components/state\">aframe-state-component</a>, pour centraliser la gestion d‚Äô√©tat (je ne l‚Äôai pas utilis√© mais √ßa a l‚Äôair cool)</li>\n</ul>\n<p>Sinon, sachez que A-Frame est bas√© sur <a href=\"https://threejs.org/\">three.js</a> et que vous pouvez utiliser directement les fonctions de three.js si la surcouche A-Frame ne vous suffit pas. Plus d‚Äôinfos dans <a href=\"https://aframe.io/docs/1.2.0/introduction/developing-with-threejs.html\">la doc</a>.</p>\n<h2>Mon jeu</h2>\n<p>BON ET MON JEU ALORS?!?!? Je vous bassine avec depuis le d√©but et je ne vous l‚Äôai toujours pas montr√©. Et bien vous pouvez y jouer sur <a href=\"https://duckhuntrevenge.surge.sh\">https://duckhuntrevenge.surge.sh</a>. Comme je l‚Äôai expliqu√©, les contr√¥les risquent d‚Äô√™tre un peu sp√©ciaux (pour ne pas dire bugg√©s) suivant votre mat√©riel VR. Ensuite, il est fortement conseill√© d‚Äôutiliser Chrome ou Edge pour y jouer sur PC. Et pour finir, mon meilleur score est de 157 points, alors h√©site pas √† l√¢cher le tien dans les comms! (oui j‚Äôaurais pu faire un scoreboard. Mais bon heu‚Ä¶ voil√†, hein, okay?)</p>\n<p>Pour les curieux, vous pouvez retrouver le code de mon jeu sur <a href=\"https://github.com/robiiiiiiiiiiiin/duck-hunt-revenge\">ce repo</a>.</p>","frontmatter":{"title":"D√©velopper un jeu en r√©alit√© virtuelle sur le web","date":"16 mars 2021","description":"√áa me paraissait presque impossible, et c'est pourtant si facile √† l'aide du framework A-Frame.","tags":["Framework"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIBA//aAAwDAQACEAMQAAABauPUNQUBz//EABoQAAMAAwEAAAAAAAAAAAAAAAECAwQRMjP/2gAIAQEAAQUCWgiy01OZLqOaKBDF8f/EABgRAQEAAwAAAAAAAAAAAAAAAAEAAgMh/9oACAEDAQE/ATlluRv/xAAYEQACAwAAAAAAAAAAAAAAAAAAARNBUf/aAAgBAgEBPwGiBaf/xAAcEAACAgIDAAAAAAAAAAAAAAAAAQIRAyEQIkH/2gAIAQEABj8CyPyUtUPvJuy3J8aQj//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/IUILakbmZxKzutIb3JSLz3cuFMrTf//aAAwDAQACAAMAAAAQqO//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QKh2ciF//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QUVsKaIv/xAAcEAEBAAIDAQEAAAAAAAAAAAABEQAhMUFRYXH/2gAIAQEAAT8Q6G9KE13ffmAGNmqlI3kaa+ZViohCPnOMoQoLq+5UqDUN43ORQ/NZ/9k=","aspectRatio":1.7857142857142858,"src":"/static/df7aeee6e88dc86dceb7d44ede3b648a/64b17/thumbnail.jpg","srcSet":"/static/df7aeee6e88dc86dceb7d44ede3b648a/e94f2/thumbnail.jpg 100w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/4fa6c/thumbnail.jpg 200w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/64b17/thumbnail.jpg 400w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/39f27/thumbnail.jpg 600w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/a1eb1/thumbnail.jpg 800w,\n/static/df7aeee6e88dc86dceb7d44ede3b648a/a6c62/thumbnail.jpg 1200w","sizes":"(max-width: 400px) 100vw, 400px"}}}}}},"pageContext":{"id":"1f23931c-cfc5-5a75-91d7-872e65ab1bbd"}},"staticQueryHashes":["3764592887"]}