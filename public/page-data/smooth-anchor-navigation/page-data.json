{"componentChunkName":"component---src-templates-blog-post-js","path":"/smooth-anchor-navigation/","result":{"data":{"site":{"siteMetadata":{"title":"GOLB | blog web et tech"}},"markdownRemark":{"id":"7cbddf7b-4685-56c0-8362-8d3c50d56dad","excerpt":"Un petit article rapide sur comment ajouter un effet smoooooth sur votre navigation interne par ancre. Je vous donne mes deux solutions qui sont, pour moi, le…","html":"<p>Un petit article rapide sur comment ajouter un effet smoooooth sur votre navigation interne par ancre. Je vous donne mes deux solutions qui sont, pour moi, le juste milieu entre la simplicité d’implémentation et le plus cross-browser possible.</p>\n<h2>scroll-behavior</h2>\n<p>La solution la plus simple serait la propriété CSS <a href=\"https://developer.mozilla.org/docs/Web/CSS/scroll-behavior\">scroll-behavior</a></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">html</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">scroll-behavior</span><span class=\"token punctuation\">:</span> smooth<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ce sera certainement la solution à adopter dans quelque temps, mais pour l’instant j’ai remarqué des bugs sur mobile, notamment sur Firefox. Et tout comme la prochaine solution, elle n’est pas supportée par Safari. Cependant, il existe <a href=\"https://github.com/iamdustan/smoothscroll\">ce polyfill</a> sensé régler le problème. Malheureusement je n’ai pas de Safari sous la main pour tester, mais vu la popularité du repo, ça doit certainement marcher.</p>\n<h2>.scrollIntoView()</h2>\n<p>La solution la plus stable que j’ai trouvée est la fonction javascript <a href=\"https://developer.mozilla.org/docs/Web/API/Element/scrollIntoView\">scrollIntoView()</a>.  Cette fonction s’utilise sur l’élément vers lequel vous voulez scroller. Vous y ajoutez l’option “smooth” et le tour est joué.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#a-propos<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>inner-link<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>À propos<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>a-propos<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>À propos<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// On sélectionne tous nos liens internes</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a.inner-link'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">link</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// On leur ajoute un listener sur le clic</span>\n    link<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// On enlève le comportement par défaut</span>\n        e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// On récupère l'ancre</span>\n        <span class=\"token keyword\">let</span> anchor <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>href\n        <span class=\"token comment\">// On scroll smoothement vers l'ancre :)</span>\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>anchor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">scrollIntoView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            behavior<span class=\"token operator\">:</span> <span class=\"token string\">'smooth'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Cette solution marche extrêmement bien sur tous les navigateurs que j’ai pu tester, excepté Safari, bien entendu.  Donc désolé si vous vous attendiez à la solution parfaite, mais pour l’instant il ne semble y avoir aucune solution native réellement cross-browser.</p>\n<p>Si vous détenez la solution miracle, je suis preneur!</p>","frontmatter":{"title":"Smooth anchor navigation en javascript","date":"24 mai 2021","description":"La navigation par ancre c'est cool, mais on aimerait souvent ajouter une petite animation smooth. Il existe beaucoup de solutions pour le faire, qui marchent toutes plus ou moins (surtout moins). Voici les meilleures solutions que j'ai trouvées.","tags":["Javascript"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABQAB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAwL/2gAMAwEAAhADEAAAATdawlIlai//xAAaEAEBAAIDAAAAAAAAAAAAAAABAgADERMh/9oACAEBAAEFAiFOt52aEpiZxkyfZ//EABcRAQEBAQAAAAAAAAAAAAAAAAEAAhH/2gAIAQMBAT8ByDaeN//EABYRAQEBAAAAAAAAAAAAAAAAAAERAP/aAAgBAgEBPwFpizf/xAAaEAADAQADAAAAAAAAAAAAAAAAARECMVFh/9oACAEBAAY/As9Nk9hwZiKVn//EABkQAQEBAQEBAAAAAAAAAAAAAAERACExQf/aAAgBAQABPyHkeCShLiXEc8zAkW+6x6tH37nLou//2gAMAwEAAgADAAAAEM8P/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREA/9oACAEDAQE/EIFMKk3/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAECAQE/EEDbjt//xAAdEAEAAwABBQAAAAAAAAAAAAABABEhQTFhcYGh/9oACAEBAAE/EBO+AQ12nfUUAKSlP3mJQ9G2Vna5SkiC2N9TZcAtVT5RmPOWf//Z","aspectRatio":1.7857142857142858,"src":"/static/8f46543598212c0fa77feb0fe16ddc98/56640/thumbnail.jpg","srcSet":"/static/8f46543598212c0fa77feb0fe16ddc98/e94f2/thumbnail.jpg 100w,\n/static/8f46543598212c0fa77feb0fe16ddc98/4fa6c/thumbnail.jpg 200w,\n/static/8f46543598212c0fa77feb0fe16ddc98/56640/thumbnail.jpg 297w","sizes":"(max-width: 297px) 100vw, 297px"}}}}}},"pageContext":{"id":"7cbddf7b-4685-56c0-8362-8d3c50d56dad"}},"staticQueryHashes":["3764592887"]}