{"componentChunkName":"component---src-templates-blog-post-js","path":"/emailjs/","result":{"data":{"site":{"siteMetadata":{"title":"GOLB | blog web et tech"}},"markdownRemark":{"id":"ddc725b1-abb7-53d8-8343-ccaf5401ab8d","excerpt":"Les formulaires de contact sont devenus presque indispensables pour les sites de type vitrine. Je doute qu’ils soient toujours utiles et utilisés, mais malgré…","html":"<p>Les formulaires de contact sont devenus presque indispensables pour les sites de type vitrine. Je doute qu’ils soient toujours utiles et utilisés, mais malgré ça, tout le monde en veut un, et j’avoue que c’est quand même plus classe que de juste afficher une adresse mail. Mais c’est parfois le seul élément interactif du site, et donc un élément qui va demander plus de temps de développement. Et jusqu’à maintenant j’utilisais PHPMailer, et donc je devais m’embêter à héberger le site sur un serveur avec PHP uniquement pour ce foutu formulaire de contact. Et quand des services comme Netlify ou Surge.sh existent, je me dis que c’est quand même bien dommage de ne pas pouvoir les utiliser à cause d’une seule fonctionnalité.</p>\n<p>Je me suis donc dit qu’il devait bien exister des services appelables en JavaScript, ou bien juste une bête API avec un PHPMailer derrière. Et bien j’ai trouvé l’outil <a href=\"https://www.emailjs.com/\">EmailJS</a> qui remplit exactement mes besoins. Ce n’est pas le seul outil existant, il y a également un autre <a href=\"https://github.com/eleith/emailjs\">emailjs</a> qui est opensource et qui ne nécessite pas de créer un compte sur une plateforme. Je suis très content d’EmailJS alors je n’ai pas testé son concurrent opensource, mais je le garde de côté au cas où j’atteindrais les limites de la version gratuite d’EmailJS.</p>\n<h2>Comment ça marche?</h2>\n<p>C’est vraiment simple. Premièrement, vous vous créez un compte. Ensuite il va falloir paramétrer un “Email Service”, c’est-à-dire un serveur d’envoi. Pour ma part, j’ai utilisé une adresse mail hébergée chez Infomaniak, donc j’ai utilisé leur serveur SMTP</p>\n<div style=\"max-width: 25rem; margin: auto\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/76908c83eeb7c7e09bf88ba304adf485/cbbdd/config_email_service.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 125.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAHqtfKZzQUrTnG84xvP/8QAGRAAAwADAAAAAAAAAAAAAAAAAAMTAjAz/9oACAEBAAEFAoLIKIK0O54n/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAEDAQE/ATW//8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEREBL/2gAIAQIBAT8BrK85P//EABkQAAIDAQAAAAAAAAAAAAAAAAAyAQIQMP/aAAgBAQAGPwJYFF4Wz//EAB4QAAEDBAMAAAAAAAAAAAAAAAABQWEQESAhMXGh/9oACAEBAAE/IUubKKRR6vh5jivZ/9oADAMBAAIAAwAAABAU2YH/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/EIItf//EABgRAAMBAQAAAAAAAAAAAAAAAAABEWFx/9oACAECAQE/ENjYSrh2f//EACIQAQACAAQHAQAAAAAAAAAAAAEAERBBkdEhMVFhofDxsf/aAAgBAQABPxBSGAtVfLWfTd59N3hVmw44UOUFXY1fuUEl9K1w8r+k9TsT/9k=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"config email service\" title=\"config email service\" src=\"/static/76908c83eeb7c7e09bf88ba304adf485/cbbdd/config_email_service.jpg\" srcset=\"/static/76908c83eeb7c7e09bf88ba304adf485/08b3c/config_email_service.jpg 225w,\n/static/76908c83eeb7c7e09bf88ba304adf485/12ba2/config_email_service.jpg 450w,\n/static/76908c83eeb7c7e09bf88ba304adf485/cbbdd/config_email_service.jpg 597w\" sizes=\"(max-width: 597px) 100vw, 597px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n</div>\n<p>Ensuite vous créez un template d’email en intégrant les champs de votre formulaire avec une syntaxe en {{ moustache }}</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f8ac34ddf3366dab03700dbdae26a747/b01fd/config_email_template.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3qAH/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFhABAQEAAAAAAAAAAAAAAAAAARBB/9oACAEBAAE/IQdb/9oADAMBAAIAAwAAABCAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAQEBAQEAAAAAAAAAAAAAAAEAMSFh/9oACAEBAAE/ECBp5ORw2//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"config_email_template\"\n        title=\"config_email_template\"\n        src=\"/static/f8ac34ddf3366dab03700dbdae26a747/86440/config_email_template.jpg\"\n        srcset=\"/static/f8ac34ddf3366dab03700dbdae26a747/08b3c/config_email_template.jpg 225w,\n/static/f8ac34ddf3366dab03700dbdae26a747/12ba2/config_email_template.jpg 450w,\n/static/f8ac34ddf3366dab03700dbdae26a747/86440/config_email_template.jpg 900w,\n/static/f8ac34ddf3366dab03700dbdae26a747/7e63a/config_email_template.jpg 1350w,\n/static/f8ac34ddf3366dab03700dbdae26a747/b01fd/config_email_template.jpg 1627w\"\n        sizes=\"(max-width: 900px) 100vw, 900px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Finalement, vous intégrez ça à votre code. Par exemple:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> init <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'emailjs-com'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> emailjs <span class=\"token keyword\">from</span> <span class=\"token string\">'emailjs-com'</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user_votrePropreUserId\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> form <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form'</span><span class=\"token punctuation\">)</span>\n\nform<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'submit'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    evt<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value\n    <span class=\"token keyword\">let</span> client_mail <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#mail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value\n    <span class=\"token keyword\">let</span> phone <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#tel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value\n    <span class=\"token keyword\">let</span> email_object <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#object'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value\n    <span class=\"token keyword\">let</span> message <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#message'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value\n\n    emailjs<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'service_qwertzu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'template_qwertzu'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> client_mail<span class=\"token punctuation\">,</span> phone<span class=\"token punctuation\">,</span> email_object<span class=\"token punctuation\">,</span> message <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        \tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Success\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        \tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Erreur\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Et voilà! D’autres fonctionnalités existent comme par exemple les réponses automatiques, l’enregistrement des contacts, l’ajout de pièces jointes et autres. Je vous laisse les tester si ça vous intéresse.</p>","frontmatter":{"title":"Envoyer un formulaire par mail avec EmailJS","date":"09 février 2021","description":"Jusqu'à aujourd'hui, j'utilisais encore PHP pour envoyer des mails depuis mes sites web. Mais j'en avais marre de devoir utiliser un serveur PHP uniquement pour cette fonctionnalité. Alors j'ai trouvé une solution!","tags":["JavaScript"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABsjPZYcExP//EABgQAAMBAQAAAAAAAAAAAAAAAAABAgMy/9oACAEBAAEFAlqZ6it2T0hH/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAECERP/2gAIAQMBAT8Bc6ND/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAES/9oACAECAQE/AZTIP//EABkQAAMAAwAAAAAAAAAAAAAAAAABERAhYf/aAAgBAQAGPwJ9Nlo8/wD/xAAbEAADAAIDAAAAAAAAAAAAAAAAAREhUTFBgf/aAAgBAQABPyFEzrTQxOzjtlKq9gxcTGzZ/9oADAMBAAIAAwAAABDbz//EABgRAQADAQAAAAAAAAAAAAAAAAEAETEh/9oACAEDAQE/EHI1se8n/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERUXH/2gAIAQIBAT8QTmEbP//EAB4QAQEAAgEFAQAAAAAAAAAAAAERACGRMUFRYcHw/9oACAEBAAE/ENooSlb/AHjGZpUOyE6esCEVkJfecRJWUccvXGGDoXn/2Q==","aspectRatio":1.7857142857142858,"src":"/static/b9c0941e4fed6d1bd65a1ecf4a205412/64b17/thumbnail.jpg","srcSet":"/static/b9c0941e4fed6d1bd65a1ecf4a205412/e94f2/thumbnail.jpg 100w,\n/static/b9c0941e4fed6d1bd65a1ecf4a205412/4fa6c/thumbnail.jpg 200w,\n/static/b9c0941e4fed6d1bd65a1ecf4a205412/64b17/thumbnail.jpg 400w,\n/static/b9c0941e4fed6d1bd65a1ecf4a205412/39f27/thumbnail.jpg 600w,\n/static/b9c0941e4fed6d1bd65a1ecf4a205412/a1eb1/thumbnail.jpg 800w,\n/static/b9c0941e4fed6d1bd65a1ecf4a205412/a6c62/thumbnail.jpg 1200w","sizes":"(max-width: 400px) 100vw, 400px"}}}}}},"pageContext":{"id":"ddc725b1-abb7-53d8-8343-ccaf5401ab8d"}},"staticQueryHashes":["3764592887"]}