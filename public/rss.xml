<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[GOLB | blog web et tech]]></title><description><![CDATA[GOLB, un blog parlant de web, de tech, de ciné, qui pose pleins de questions et qui tente parfois d'y répondre.]]></description><link>https://golb.ch</link><generator>GatsbyJS</generator><lastBuildDate>Fri, 05 Feb 2021 14:33:56 GMT</lastBuildDate><item><title><![CDATA[Cheat sheets et Checklists]]></title><description><![CDATA[Pour finir cette série d’articles, j’aimerais vous proposer quelques cheat sheets et checklists des recommandations du WCAG, puis un petit…]]></description><link>https://golb.ch/cheat-sheets/</link><guid isPermaLink="false">https://golb.ch/cheat-sheets/</guid><pubDate>Sun, 13 Dec 2020 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;Pour finir cette série d’articles, j’aimerais vous proposer quelques cheat sheets et checklists des recommandations du &lt;a href=&quot;https://www.w3.org/WAI/standards-guidelines/wcag/fr&quot;&gt;WCAG&lt;/a&gt;, puis un petit mot sur Axe, dont je n’ai même pas encore parlé.&lt;/p&gt;
&lt;h2&gt;Cheat sheets&lt;/h2&gt;
&lt;p&gt;J’ai trouvé deux cheat sheets plutôt pas mal. Mais attention, contrairement aux checklists, ces documents ne sont qu’un résumé de certains points importants. Donc c’est bien pour les bases, mais ça reste incomplet.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;La &lt;a href=&quot;https://moritzgiessmann.de/accessibility-cheatsheet/&quot;&gt;cheat sheet de Moritz Giessmann&lt;/a&gt; est le document le plus résumé que je vous propose. Je l’aime bien car il est assez visuel et on pourrait même en faire un poster. Cependant, c’est un GROS résumé des recommandations du WCAG. Donc je ne le conseillerais pas vraiment comme outil de travail. Mais vraiment, à afficher dans son bureau ça peut être cool.&lt;/li&gt;
&lt;li&gt;La &lt;a href=&quot;https://bitsofco.de/the-accessibility-cheatsheet/&quot;&gt;cheat sheet de Ire Aderinokun&lt;/a&gt; est excellente pour un débutant. C’est un document relativement complet, fournissant de très bons exemples concis pour chaque point abordé. C’est un résumé dense, mais ça reste un résumé. De plus ce document a été écrit en 2015, donc avant la mise à jour 2.1 du WCAG. Mais je recommande vraiment ce document pour débuter car les checklists complètes du WCAG sont relativement indigestes au premier abord (et même au second). Donc c’est un bon compromis.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Checklists&lt;/h2&gt;
&lt;p&gt;On entre dans les listes complètes des recommandations du WCAG. En vrai vous pourriez juste aller sur le &lt;a href=&quot;https://www.w3.org/TR/WCAG21/&quot;&gt;site officiel du WCAG&lt;/a&gt; mais je trouve la liste ultra indigeste. Mais ça reste le meilleur document de référence si on cherche un détail précis&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;La &lt;a href=&quot;https://webaim.org/standards/wcag/checklist&quot;&gt;checklist de WebAIM&lt;/a&gt; n’a rien de révolutionnaire mais je la trouve agréable à lire. C’est bien expliqué, suffisamment concis et raisonnablement long.&lt;/li&gt;
&lt;li&gt;La &lt;a href=&quot;https://romeo.elsevier.com/accessibility_checklist/&quot;&gt;checklist de Elsevier&lt;/a&gt; est également plutôt standard. L’utilisation d’accordéons rend la navigation agréable. Petite fonctionnalité appréciable, on peut filtrer la liste.&lt;/li&gt;
&lt;li&gt;La &lt;a href=&quot;https://codepen.io/weboverhauls/full/zYvopYE&quot;&gt;checklist de Web Overhauls&lt;/a&gt; est littéralement une checklist. Donc on peut cocher chaque étape. J’aurais bien aimé trouver une version partageable d’une checklist de ce type. Mais malheureusement je n’en ai pas trouvé. C’est l’occasion de créer quelque chose 👷&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Axe tools&lt;/h2&gt;
&lt;p&gt;Je ne pouvais pas conclure une série d’articles sur l’accessibilité sans parler de Axe. Les &lt;a href=&quot;https://www.deque.com/axe/&quot;&gt;Axe tools&lt;/a&gt; sont une série d’outils de testing basés sur la checklist du WCAG. C’est probablement l’outil de testing le plus populaire dans le monde de l’accessibilité. Je trouve que cet outil est loin d’être parfait. Mais je vous invite quand même à y jeter un œil et à le tester. Je vous recommande &lt;a href=&quot;https://chrome.google.com/webstore/detail/axe-web-accessibility-tes/lhdoppojpmngadmnindnejefpokejbdd&quot;&gt;l’extension pour Google Chrome&lt;/a&gt; qui est rapidement installée et qu’on peut facilement tester.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Lighthouse = pas bien, mais en fait si]]></title><description><![CDATA[J’avais rapidement mentionné l’article Building the most inaccessible site possible with a perfect Lighthouse score dans mon premier article…]]></description><link>https://golb.ch/lighthouse/</link><guid isPermaLink="false">https://golb.ch/lighthouse/</guid><pubDate>Fri, 11 Dec 2020 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;J’avais rapidement mentionné l’article &lt;a href=&quot;https://www.matuzo.at/blog/building-the-most-inaccessible-site-possible-with-a-perfect-lighthouse-score/&quot;&gt;Building the most inaccessible site possible with a perfect Lighthouse score&lt;/a&gt; dans mon premier article. J’aimerais en parler un peu plus, car je trouve cet article intéressant.&lt;/p&gt;
&lt;h2&gt;L’article&lt;/h2&gt;
&lt;p&gt;Pour résumer, l’article démontre qu’on peut faire un site complètement inutilisable et obtenir un score de 100 partout sur Lighthouse (ou autre outil de testing).&lt;/p&gt;
&lt;h2&gt;Ma critique&lt;/h2&gt;
&lt;p&gt;La démonstration que fait l’auteur est assez marrante à lire. Et en effet, on peut effectivement obtenir un score parfait avec un site complètement inutilisable. Cependant, je trouve que les moyens utilisés pour rendre le site inutilisable sont plutôt absurdes. &lt;/p&gt;
&lt;p&gt;Par exemple, le premier moyen utilisé est d’ajouter l’attribut &lt;a href=&quot;https://developer.mozilla.org/fr/docs/Web/HTML/Attributs_universels/hidden&quot;&gt;hidden&lt;/a&gt; à la balise &lt;code class=&quot;language-text&quot;&gt;body&lt;/code&gt;, puis de réafficher le body en CSS avec un &lt;code class=&quot;language-text&quot;&gt;display: block;&lt;/code&gt;. Du coup, le site ne s’affiche que si le CSS est bien chargé. Personnellement, je ne vois pas qui aurait l’idée de faire une telle spécialité dans son code. (alors en réalité si, il y aurait le cas de figure où on voudrait éviter le &lt;a href=&quot;https://fr.wikipedia.org/wiki/FOUC&quot;&gt;FOUC&lt;/a&gt;, mais il y a de meilleures manières de faire, et lorsqu’on le fait, on est normalement conscient de ce que ça implique). &lt;/p&gt;
&lt;p&gt;Du coup je vais prendre un deuxième et meilleur exemple. Dans l’article, l’auteur utilise le code suivant&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@media&lt;/span&gt; screen &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;-ms-high-contrast&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; active&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; window &lt;span class=&quot;token important&quot;&gt;!important&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ce code fait en sorte que lorsqu’on active le mode “high contrast”, le texte soit de la même couleur que le fond. Alors ok, Lighthouse ne le détecte pas. Mais honnêtement, qui va faire ça sans faire exprès?&lt;/p&gt;
&lt;p&gt;La plupart des exemples de l’article sont aussi absurdes que celui-ci. Désactiver les entrées du clavier, désactiver les entrées de la souris, mettre 1% d’opacité aux textes… alors en effets, on peut “tromper” Lighthouse ainsi, mais il faut vraiment le vouloir. Malgré ça j’aime quand même bien cet article, mais je pense qu’il aurait pu être plus convainquant en présentant des exemples plus concrets. Car en finissant de lire cet article, je me suis dit que si l’auteur avait dû aller chercher si loin, c’est que Lighthouse était finalement vraiment pas si mal.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;L’article démontre au final que Lighthouse est un très bon outil. Mais en effet, on peut avoir fait certaines choses très spécifiques qui passeraient entre les mailles des tests. Donc utilisez plusieurs outils de testing, et n’oubliez pas qu’un des meilleurs tests reste &lt;a href=&quot;https://golb.ch/screenreaders/&quot;&gt;le test concret&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Traduisons un site avec node-static-i18n]]></title><description><![CDATA[Cette article fait suite à mon dernier article ”i18n et l10n”. Nous avions vu la démarche à avoir lorsqu’on aimerait rendre un site statique…]]></description><link>https://golb.ch/testonsi18n/</link><guid isPermaLink="false">https://golb.ch/testonsi18n/</guid><pubDate>Thu, 03 Dec 2020 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;Cette article fait suite à mon dernier article ”&lt;a href=&quot;https://golb.ch/i18netl10n/&quot;&gt;i18n et l10n&lt;/a&gt;”. Nous avions vu la démarche à avoir lorsqu’on aimerait rendre un site statique accessible en plusieurs langages. Et ce n’est pas un total hasard si j’ai choisi cette article, car j’avais comme projet de proposer une version française de mon &lt;a href=&quot;https://robinbecherraz.ch&quot;&gt;site personnel&lt;/a&gt; qui est actuellement uniquement en anglais. (Bien qu’à l’instant où vous lirez ces lignes, il sera déjà disponible dans les deux langues). Je ne vais cependant pas aller autant en détail que dans l’article. Mais je vais déjà mettre en place l’essentiel, c’est à dire la traduction des textes.&lt;/p&gt;
&lt;h2&gt;L’état actuel du site&lt;/h2&gt;
&lt;p&gt;Une première particularité est que le site est déjà en production, et n’a pas forcément été pensé pour être multilingue. &lt;/p&gt;
&lt;p&gt;J’utilise Webpack pour automatiser plusieurs chose.&lt;/p&gt;
&lt;p&gt;Premièrement, pour le JavaScript. Je fais passer mes fichiers .js à travers Babel et ils sont ensuite packagé dans un fichier bundle.js&lt;/p&gt;
&lt;p&gt;Deuxièmement, pour le CSS. Ça ne nous intéresse pas trop mais en gros ça convertit et bundle mes fichiers .scss.&lt;/p&gt;
&lt;p&gt;Troisièmement, Pour le HTML. Et c’est là où ça va principalement interférer avec la traduction. J’utilise &lt;a href=&quot;https://github.com/sagold/handlebars-webpack-plugin&quot;&gt;handlebars-webpack-plugin&lt;/a&gt; afin de pouvoir utiliser des templates HTML. En l’occurrence en utilisant la fonctionnalité de &lt;a href=&quot;https://handlebarsjs.com/guide/partials.html&quot;&gt;partials de Handlebars&lt;/a&gt;. Le plugin webpack me permet de compiler ces templates lors du build de Webpack afin d’avoir des fichiers statiques sur le serveur. Pas besoins de savoir précisément comment ça marche, la seule chose à retenir est que ces templates utilisent une &lt;a href=&quot;http://mustache.github.io/mustache.5.html&quot;&gt;syntaxe de type {{ mustache }}&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Résultat attendu&lt;/h2&gt;
&lt;p&gt;Je voulais que mon site reste statique, je ne voulais pas utiliser PHP ou autre pour traduire mes pages. J’ai donc décidé d’organiser mes fichiers selon la structure suivante:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;dist
+-- en
|	+-- index.html
|	+-- projects
|		+-- firstproject.html
|		+-- ...
+-- fr
|	+-- index.html
|	+-- projets
|		+-- premierprojet.html
|		+-- ...
+-- index.html&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;J’ai décidé de traduire les urls. Par exemple &lt;code class=&quot;language-text&quot;&gt;robinbecherraz.ch/en/projects/firstproject&lt;/code&gt; en anglais et &lt;code class=&quot;language-text&quot;&gt;robinbecherraz.ch/fr/projets/premierprojet&lt;/code&gt; en français. J’ai fais ça pour apporter plus de sémantique et d’accessibilité aux urls. Un des inconvénients est que si on change juste le &lt;code class=&quot;language-text&quot;&gt;/en/&lt;/code&gt; en &lt;code class=&quot;language-text&quot;&gt;/fr/&lt;/code&gt; dans l’url, on tombera sur un 404. Mais bon il y a des boutons pour changer de langue qui sont plutôt visibles, le site étant assez sobre, donc je ne pense pas que ce soit très grave. De plus, si je veux vraiment palier à se problème, je pourrais mettre en place des redirections.&lt;/p&gt;
&lt;h2&gt;Mise en place de i18n&lt;/h2&gt;
&lt;p&gt;Le module npm &lt;a href=&quot;https://github.com/claudetech/node-static-i18n&quot;&gt;node-static-i18n&lt;/a&gt; s’est assez vite imposé puisqu’il correspond exactement à mes besoins. Je vous passe l’étape d’installation qui est assez simple pour passer directement à l’utilisation de i18n. &lt;/p&gt;
&lt;p&gt;Vous devrez premièrement créer un fichier json pour chaque langue. Par exemple &lt;code class=&quot;language-text&quot;&gt;locales/fr.json&lt;/code&gt; avec à l’intérieur:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
  &amp;quot;home&amp;quot;: {
    &amp;quot;title&amp;quot;: &amp;quot;Mon site web&amp;quot;
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Et &lt;code class=&quot;language-text&quot;&gt;locales/en.json&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
  &amp;quot;home&amp;quot;: {
    &amp;quot;title&amp;quot;: &amp;quot;My website&amp;quot;
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pour chaque balise dont vous voudrez traduire le contenu, vous devrez utiliser l’attribut &lt;code class=&quot;language-text&quot;&gt;data-t&lt;/code&gt;, avec à l’intérieur la clé de la valeur souhaitée dans vos fichiers json. Par exemple, dans &lt;code class=&quot;language-text&quot;&gt;index.html&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;data-t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;home.title&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ensuite, vous lancez la traduction de vos fichiers en lançant&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ static-i18n -l fr -i en -i fr dist&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ceci vous générera la structure suivante:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;dist
+-- en
|	+-- index.html
|	+-- projects
|		+-- firstproject.html
|		+-- ...
+-- index.html
+-- projets
|		+-- firstproject.html
|		+-- ...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;le fichier &lt;code class=&quot;language-text&quot;&gt;dist/index.html&lt;/code&gt;contiendra&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Mon site web&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;et &lt;code class=&quot;language-text&quot;&gt;dist/en/index.html&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;My website&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Incroyable non?&lt;/p&gt;
&lt;h2&gt;Premiers problèmes&lt;/h2&gt;
&lt;h3&gt;Structure générée&lt;/h3&gt;
&lt;p&gt;Alors c’est cool mais c’est pas vraiment la structure que j’aimerais. J’ai cherché et je n’ai pas trouvé de moyen pour que static-i18n me génère la structure que je souhaite. Du coup j’ai écris un petit script bash pour déplacer mes fichiers une fois créés&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;#!/bin/bash

# Move /dist/projects into /dist/fr/projets and copy /index.html to /fr/index.html
mkdir -p ./dist/fr/projets
mv ./dist/projects/* ./dist/fr/projets/
rm -rf ./dist/projects
cp ./dist/index.html ./dist/fr/index.html&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ce n’est certainement pas la meilleure manière de faire mais ça fait le taff.&lt;/p&gt;
&lt;h3&gt;Nom des fichiers&lt;/h3&gt;
&lt;p&gt;Malheureusement, i18n n’est pas capable de traduire les noms des fichiers (à ma connaissance). Du coup, j’ai ajouté ces quelques lignes au début de mon script&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# Translate files name
mv ./dist/projects/firstproject.html ./dist/projects/premierprojet.html&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Rediriger le client sur la bonne langue&lt;/h2&gt;
&lt;p&gt;Ma page &lt;code class=&quot;language-text&quot;&gt;dist/index.html&lt;/code&gt; est la page racine de mon site. Elle est en français. J’aimerais donc&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Rediriger un utilisateur qui a déjà visité mon site sur la langue qu’il utilisait&lt;/li&gt;
&lt;li&gt;Essayer de connaitre la langue préférée du client si celui-ci n’a jamais visité mon site&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Pour cette deuxième étape, j’ai décidé d’utiliser la propriété &lt;a href=&quot;https://developer.mozilla.org/fr/docs/Web/API/NavigatorLanguage/language&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;navigator.language&lt;/code&gt;&lt;/a&gt;. C’est selon moi la plus fiable des méthode pour déterminer le langage souhaité par un utilisateur. J’ai donc ajouté le script suivant à mon fichier &lt;code class=&quot;language-text&quot;&gt;dist/index.html&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; storedLang &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; localStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lang&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;checkBrowserLang&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; lang &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; navigator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;language
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;^en.*&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lang&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        localStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lang&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;en&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;href&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;^fr.*&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lang&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        localStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lang&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fr&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;storedLang&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;en&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;href&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fr&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;checkBrowserLang&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Aller plus loin avec i18n&lt;/h2&gt;
&lt;p&gt;On a vu l’utilisation de base d’i18n. Mais j’ai évidemment dû faire certaines choses un peu plus complexes. Par exemple, traduire l’attribut &lt;code class=&quot;language-text&quot;&gt;content&lt;/code&gt; du meta tag suivant qui se trouve dans une partial Handlebars:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;og:title&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;{{project.title}} - a project by Robin Bécherraz&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Si vous avez déjà utilisé un système de templating, vous devriez comprendre cette ligne.&lt;/p&gt;
&lt;p&gt;À noter que j’ai ajouté le texte “a project by Robin Bécherraz” dans mes fichiers &lt;code class=&quot;language-text&quot;&gt;locales&lt;/code&gt;/ sous la clé &lt;code class=&quot;language-text&quot;&gt;projects.addToMetaTitle&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;Fonctionnement de mes templates Handlebars&lt;/h3&gt;
&lt;p&gt;la variable &lt;code class=&quot;language-text&quot;&gt;project.title&lt;/code&gt; passée à ma partial provient d’un fichier json &lt;code class=&quot;language-text&quot;&gt;data/projects.json&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
    &amp;quot;firstproject&amp;quot;: {
        &amp;quot;title&amp;quot;: &amp;quot;My cool project&amp;quot;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;J’appelle ensuite ma partial ainsi&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{{&amp;gt; partials/mypartials data=data project=firstproject }}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(le &lt;code class=&quot;language-text&quot;&gt;data=data&lt;/code&gt; est spécifique à handlebars-webpack-plugin, ça pointe en gros sur mon fichier &lt;code class=&quot;language-text&quot;&gt;data/projects.json&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;Du coup, j’ai du traduire les titre de mes projets en procédant ainsi:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{
    &amp;quot;firstproject&amp;quot;: {
        &amp;quot;title&amp;quot;: &amp;quot;firstproject.title&amp;quot;
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Interpolation de valeur d’attribut avec i18n&lt;/h3&gt;
&lt;p&gt;Voici, selon la doc de static-i18n, comment traduire un attribut avec en plus de l’interpolation:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;link&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;canonical&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;data-attr-t&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;data-attr-t-interpolate&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href-t&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;{{links.baseAbsolute}}filename.{{links.extension}}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Vous voyez peut-être le problème, static-i18n et Handlebars utilisent la même syntaxe {{ mustache }} pour faire deux choses différentes. On a donc un conflit entre ces deux outils. &lt;/p&gt;
&lt;h3&gt;Solution&lt;/h3&gt;
&lt;p&gt;Cette article est déjà super long donc je vais vous montrer directement la solution que j’ai trouvée. Afin de rendre la ligne suivante traduisible&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;og:title&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;{{project.title}} - a project by Robin Bécherraz&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Je l’ai modifiée ainsi&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;og:title&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;data-attr-t&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;data-attr-t-interpolate&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content-t&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;{{surroundWithCurlyBraces project.title}} - {{surroundWithCurlyBraces &lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;projects.addToMetaTitle&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;}}&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Vous voyez donc que pour palier ce conflit de syntaxe entre static-i18n et Handlebars, j’ai créé un helpers “surroundWithCurlyBraces”. La ligne ci-dessus va donc être compilée par handlebars-webpack-plugin ainsi&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;og:title&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;data-attr-t&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;data-attr-t-interpolate&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content-t&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;{{firstproject.title}} - {{projects.addToMetaTitle}}&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Puis static-i18n va la traduire ainsi&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;og:title&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;My cool project - a project by Robin Bécherraz&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;ouf… pour ceux qui n’ont pas encore fuit, j’espère que vous aurez trouvé cet article intéressant malgré ce contexte très spécifique avec Handlebars. Cependant, il existe aujourd’hui beaucoup de systèmes de templating qui utilisent cette notation {{ mustache }}, donc vous serez peut-être confrontés aux mêmes problèmes que moi même si vous n’utilisez pas Handlebars.&lt;/p&gt;
&lt;p&gt;Mon environnement de développement a été pas mal complexifié par cette mise en place d’i18n. Mais les outils marchent plutôt bien. Les points pouvant être améliorés sont ces petits scripts que j’ai ajouté afin de traduire et d’organiser les fichiers traduits. Ils ralentissent pas mal le processus de traduction.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[i18n et l10n]]></title><description><![CDATA[Dans l’accessibilité on aime bien les numéronymes. Aujourd’hui on va parler d’Internationalization et de Localization. Et je comprends en…]]></description><link>https://golb.ch/i18netl10n/</link><guid isPermaLink="false">https://golb.ch/i18netl10n/</guid><pubDate>Tue, 01 Dec 2020 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;Dans l’accessibilité on aime bien les &lt;a href=&quot;https://fr.wikipedia.org/wiki/Num%C3%A9ronyme&quot;&gt;numéronymes&lt;/a&gt;. Aujourd’hui on va parler d’Internationalization et de Localization. Et je comprends en écrivant ces lignes pourquoi on abrège i18n et l10n, c’est super compliqué à orthographier. Je suis tombé récemment sur l’article ”&lt;a href=&quot;https://www.smashingmagazine.com/2020/11/internationalization-localization-static-sites/&quot;&gt;Internationalization And Localization For Static Sites&lt;/a&gt;” qui explique en gros la réflexion et la démarche à avoir lorsqu’on aimerait développer un site multilingue. Ce sujet est plutôt intéressant car aucune solution donnée n’existe. L’article nous rappelle que l’internationalisation ne consiste pas juste à traduire du texte. Et à ce niveau-là, l’article peut presque faire peur car on se rend compte que rendre un site international demande un énorme investissement. Je vais revenir sur quelques points que je trouve intéressants. Ces points paraissent, pour la plupart, être des détails. Mais ils peuvent vite complexifier grandement le développement d’un site et méritent donc qu’on s’y intéresse.&lt;/p&gt;
&lt;h2&gt;Les urls&lt;/h2&gt;
&lt;p&gt;Rien que les urls posent déjà pas mal de problèmes. Hormis le fait de choisir entre &lt;code class=&quot;language-text&quot;&gt;site.com/fr&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;site.com?lang=fr&lt;/code&gt; ou autre solution exotique, faut-il traduire nos urls? Par exemple, si on a une page en français dont l’url est &lt;code class=&quot;language-text&quot;&gt;site.com/fr/accueil&lt;/code&gt;, la version anglaise doit-elle être &lt;code class=&quot;language-text&quot;&gt;site.com/en/accueil&lt;/code&gt; ou &lt;code class=&quot;language-text&quot;&gt;site.com/en/home&lt;/code&gt;? Et bien il n’y a pas vraiment de réponse correcte. La première solution offre par exemple un moyen facile aux utilisateurs pour changer de langue, mais la deuxième permet à l’utilisateur de mieux se repérer sur le site. Je vous laisse vous faire votre propre avis sur la question.&lt;/p&gt;
&lt;h2&gt;Les dates&lt;/h2&gt;
&lt;p&gt;C’est peu-être un des problèmes les plus évidents. Et il existe énormément de solutions techniques pour gérer ce problème. Malgré ça j’ai l’impression que ça reste un cauchemar pour tous les développeurs. Du coup je propose qu’on adopte tous le format yyyy/mm/dd qui est objectivement supérieur à tout autre format. Quoi que j’hésite avec yyyy-mm-dd… 🤔&lt;/p&gt;
&lt;h2&gt;Le sens de lecture&lt;/h2&gt;
&lt;p&gt;C’est si évident et pourtant je n’y pense quasiment jamais. Mais si vous allez sur la version arabe de Facebook (&lt;a href=&quot;https://ar-ar.facebook.com/&quot;&gt;https://ar-ar.facebook.com/&lt;/a&gt;), et bien toute l’interface est mirorée (apparemment ce mot n’existe pas…). L’interface est horizontalement retournée, puisqu’on lit de droite à gauche en arabe. Alors je me suis dit que techniquement ça devait être l’enfer, surtout au niveau du css. Mais j’ai appris existence de &lt;a href=&quot;https://www.w3.org/International/questions/qa-html-dir&quot;&gt;l’attribut dir&lt;/a&gt;, qui permet d’indiquer au navigateur le sens de lecture. Alors j’ai testé sur un site que j’ai développé et WOW! J’ai été très étonné du peu d’ajustements que j’ai eu à faire pour proposer une version miroir de mon site.&lt;/p&gt;
&lt;p&gt;Il y a pléthores d’autres points intéressants à aborder. Proposer un site i18n n’est pas une mince affaire. Donc si vous êtes amené à en développer un, je ne peux que vous conseiller de relire l’article ”&lt;a href=&quot;https://www.smashingmagazine.com/2020/11/internationalization-localization-static-sites/&quot;&gt;Internationalization And Localization For Static Sites&lt;/a&gt;” et de bien réfléchir à votre stratégie avant de commencer à coder. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Pourquoi tester vos sites avec un lecteur d'écran?]]></title><description><![CDATA[Je pense que la plupart des développeurs web sont aujourd’hui sensibilisés à l’accessibilité. C’est un sujet qui revient souvent dans les…]]></description><link>https://golb.ch/screen-readers/</link><guid isPermaLink="false">https://golb.ch/screen-readers/</guid><pubDate>Wed, 25 Nov 2020 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;Je pense que la plupart des développeurs web sont aujourd’hui sensibilisés à l’accessibilité. C’est un sujet qui revient souvent dans les forums, on fait en général passer nos sites dans des analyseurs d’accessibilité, et c’est même une des 5 catégories de Google Lighthouse. La possibilité de naviguer dans un site à l’aide d’un lecteur d’écran est un des plus grands pans de l’accessibilité. Et pourtant, je me demande combien de développeurs ont déjà essayé de visiter un de leur site en utilisant un lecteur d’écran. L’article ”&lt;a href=&quot;https://www.matuzo.at/blog/building-the-most-inaccessible-site-possible-with-a-perfect-lighthouse-score/&quot;&gt;Building the most inaccessible site possible with a perfect Lighthouse score&lt;/a&gt;” démontre que les outils d’analyse, en l’occurrence Lighthouse, ne sont absolument pas infaillibles. On sait tous (développeurs frontend) qu’il faut mettre des textes alternatifs aux images ou des labels à nos liens. Mais pour ma part en tout cas, j’avoue que je le faisais plus pour avoir un bon score SEO que par réél soucis d’accessibilité. Mais récemment, je suis tombé sur l’article ”&lt;a href=&quot;https://www.marcozehe.de/how-to-use-nvda-and-firefox-to-test-your-web-pages-for-accessibility/&quot;&gt;How to use NVDA and Firefox to test your web pages for accessibility&lt;/a&gt;” de Marco Zehe, un ingénieur aveugle travaillant chez Mozilla. Cet article m’a donné envie de réellement me rendre compte de l’intérêt de toutes ces choses qu’on fait pour avoir un score de 100 sur Lighthouse.&lt;/p&gt;
&lt;p&gt;J’ai donc installé le lecteur d’écran &lt;a href=&quot;https://www.nvaccess.org/&quot;&gt;NVDA&lt;/a&gt;. Et autant vous dire que quand on n’a pas l’habitude on finit vite par désactiver le son, car tout ce que vous faites, même en dehors du navigateur, est commenté par un robot. Au passage, je vous conseille de choisir la voix de Guillaume dans les options. Sur du contenu anglophone c’est très drôle. J’ai ensuite visité le site &lt;a href=&quot;https://lechodubois.ch&quot;&gt;https://lechodubois.ch&lt;/a&gt; que j’ai développé. Celui-ci a un score Lighthouse de 97 en accessibilité donc en toute logique la navigation devrait être quasiment parfaite… spoiler… non 🙂&lt;/p&gt;
&lt;p&gt;Il m’a fallu environ 3 secondes pour tomber sur une erreur basique. Mes liens Facebook et Instagram, représentées par des icônes, n’avaient pas de label. Elles étaient donc lues “link lechodubois.ch” au lieu de “link Facebook”. Une erreur qui n’a pas été détectée par Lighthouse.&lt;/p&gt;
&lt;p&gt;Ensuite je suis allé voir le formulaire de contact. Et honnêtement c’est un peu compliqué de juger si la navigation est correcte par rapport à un lecteur d’écran. Simplement car je ne sais pas comment une page est sensée être lue, quelle est la bonne pratique. Par exemple, mes champs de formulaire sont composés d’un label et d’un champs en dessous du label. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 438px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e15e7b0a006e4e089f80d7d45de7f86a/854eb/code.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 8.860759493670885%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAACABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcsEwn//xAAWEAEBAQAAAAAAAAAAAAAAAAAAATH/2gAIAQEAAQUCXH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAE/IU//2gAMAwEAAgADAAAAEIv/AP/EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/EIf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPxCn/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERMUFR/9oACAEBAAE/EFhY9myX1n//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;code&quot;
        title=&quot;code&quot;
        src=&quot;/static/e15e7b0a006e4e089f80d7d45de7f86a/854eb/code.jpg&quot;
        srcset=&quot;/static/e15e7b0a006e4e089f80d7d45de7f86a/ff44c/code.jpg 158w,
/static/e15e7b0a006e4e089f80d7d45de7f86a/a6688/code.jpg 315w,
/static/e15e7b0a006e4e089f80d7d45de7f86a/854eb/code.jpg 438w&quot;
        sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 401px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3ae3ffbbd579336a77651bd04594d699/43cca/champ.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 16.455696202531648%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3aEB/8QAFRABAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQEAAQUCj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABUQAQEAAAAAAAAAAAAAAAAAABAR/9oACAEBAAE/IYf/2gAMAwEAAgADAAAAEAPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAAMBAAAAAAAAAAAAAAAAAQARUSH/2gAIAQEAAT8QODUt2K6z/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;champ&quot;
        title=&quot;champ&quot;
        src=&quot;/static/3ae3ffbbd579336a77651bd04594d699/43cca/champ.jpg&quot;
        srcset=&quot;/static/3ae3ffbbd579336a77651bd04594d699/ff44c/champ.jpg 158w,
/static/3ae3ffbbd579336a77651bd04594d699/a6688/champ.jpg 315w,
/static/3ae3ffbbd579336a77651bd04594d699/43cca/champ.jpg 401w&quot;
        sizes=&quot;(max-width: 401px) 100vw, 401px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Lorsque je survole le champ, le lecteur lit “edit required invalid entry has autocomplete”. Donc on ne comprend absolument pas à quoi sert ce champ. Par contre si j’entre dans le champ, le lecteur lit “nom complet astérisque edit required invalid entry has autocomplete”. Difficile de savoir si ce sont les informations attendues par un utilisateur de lecteur d’écran.&lt;/p&gt;
&lt;p&gt;Je pourrais encore vous parler de beaucoup d’éléments dont la lecture me fait me questionner. Mais on se rend déjà compte qu’il y a un fossé entre la théorie et la pratique. Je ne dis pas qu’il faut tester tous vos sites avec un lecteur d’écran. Mais faire l’expérience au moins une fois permet de mieux évaluer l’accessibilité d’un code et d’être plus critique. Cette expérience a soulevé beaucoup de questions, et j’espère que je pourrais y apporter des réponses dans de futurs articles.&lt;/p&gt;</content:encoded></item></channel></rss>